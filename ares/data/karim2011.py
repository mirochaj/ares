"""
Karim, A., et al. 2011, ApJ, 730, 61
http://arxiv.org/abs/1011.6370

For ssfr, values are corrected as seen in Behroozi et al. 2013 (http://arxiv.org/abs/1207.6105), Table 5.

"""

import numpy as np

info = \
{
 'reference':'Karim, A., et al. 2011, ApJ, 730, 61',
 'data': 'Behroozi, Table 5', 
 'imf': ('chabrier, 2003', (0.1, 100.)),
}

redshifts = [0.28, 0.49, 0.69, 0.89, 1.1, 1.38, 1.81, 2.27, 2.73]
wavelength = 1600.

ULIM = -1e10

fits = {}

# Table 1
tmp_data = {}
tmp_data['ssfr'] = \
{
 0.28: {'M': [1.0964782E+10, 2.2387211E+10, 4.2657952E+10, 8.9125094E+10, 1.5848932E+11],
    'phi': [-9.95, -10.15, -10.35, -10.6, -10.8],
    'err': [(0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.301029995663981,
           0.301029995663981), (0.3, 0.3)]
   },
 0.49: {'M': [1.1220185E+10, 2.1877616E+10, 4.3651583E+10, 8.3176377E+10, 1.7782794E+11],
    'phi': [-9.5, -9.7, -9.95, -10.15, -10.5],
    'err': [(0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.301029995663981,
           0.301029995663981), (0.3, 0.3)]
   },
 0.69: {'M': [2.2387211E+10, 4.2657952E+10, 8.3176377E+10, 1.5848932E+11],
    'phi': [-9.6, -9.75, -9.9, -10.05],
    'err': [(0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.3,
           0.3)]
   },
 0.89: {'M': [2.2387211E+10, 4.3651583E+10, 8.1283052E+10, 1.5848932E+11],
    'phi': [-9.3, -9.55, -9.75, -9.9],
    'err': [(0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.3,
           0.3)]
   },
 1.1: {'M': [2.2387211E+10, 4.3651583E+10, 8.3176377E+10, 1.5848932E+11],
    'phi': [-9.1, -9.3, -9.5, -9.6],
    'err': [(0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.3,
           0.3)]
   },
 1.38: {'M': [4.3651583E+10, 8.1283052E+10, 1.5848932E+11],
    'phi': [-9.1, -9.3, -9.4],
    'err': [(0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.3, 0.3)]
   },
 1.81: {'M': [4.2657952E+10, 8.3176377E+10, 1.5848932E+11],
    'phi': [-8.8, -8.95, -9.0],
    'err': [(0.301029995663981, 0.301029995663981), (0.301029995663981, 0.301029995663981), (0.3, 0.3)]
   },
 2.27: {'M': [8.5113804E+10, 1.5848932E+11],
    'phi': [-8.8, -8.8],
    'err': [(0.301029995663981, 0.301029995663981), (0.3, 0.3)]
   },
 2.73: {'M': [1.5848932E+11],
    'phi': [-8.7],
    'err': [(0.3, 0.3)]
   },
}


units = {'ssfr': '1.'}

data = {}
data['ssfr'] = {}

for group in ['ssfr']:
    
    for key in tmp_data[group]:
        
        if key not in tmp_data[group]:
            continue
    
        subdata = tmp_data[group]
        
        mask = []
        for element in subdata[key]['err']:
            if element == ULIM:
                mask.append(1)
            else:
                mask.append(0)
        
        mask = np.array(mask)
        
        data[group][key] = {}
        data[group][key]['M'] = np.ma.array(subdata[key]['M'], mask=mask) 
        data[group][key]['phi'] = np.ma.array(subdata[key]['phi'], mask=mask) 
        data[group][key]['err'] = tmp_data[group][key]['err']
