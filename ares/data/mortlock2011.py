"""
Mortlock, A., Conselice, C. J., Bluck, A. F. L., Bauer, A. E., Grutzbauch, R., Buitrago, F., & Ownsworth, J. 2011, MNRAS, 413, 2845

For smf_tot, values are corrected as seen in Behroozi et al. 2013 (http://arxiv.org/abs/1207.6105), for V (Sample Variance), I (Initial Mass Function), D (Dust model) corrections.
"""

import numpy as np

info = \
{
 'reference':'',
 'data': '',
 'imf': ('chabrier', (0.1, 100.)), #didn't update this
}

redshifts = [1.25, 1.75, 2.25, 2.75]
wavelength = 1600. #mulit-wavelength

ULIM = -1e10 #or this

fits = {}

# Table 3
tmp_data = {}
tmp_data['smf_tot'] = \
{
 1.25: {'M': [2.8182985E+08, 5.3209232E+08, 8.1280617E+08, 1.5345710E+09, 2.3441586E+09, 4.4257512E+09, 6.7606273E+09, 1.2764006E+10, 1.9497862E+10,
           3.6811795E+10, 5.6232448E+10, 1.0616638E+11, 1.6217615E+11, 3.0618717E+11],
    'phi': [-1.75378782734556, -1.79378782734556, -1.95378782734556, -2.02378782734556, -2.27378782734556, -2.36378782734556, -2.44378782734556,
           -2.56378782734556, -2.63378782734556, -2.51378782734555, -2.85378782734556, -3.13378782734556, -3.43378782734555, -4.13378782734556],
    'err': [(0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3,
           0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3)]
   },
 1.75: {'M': [1.5345710E+09, 2.3441586E+09, 4.4257512E+09, 6.7606273E+09, 1.2764006E+10, 1.9497862E+10, 3.6811795E+10, 5.6232448E+10, 1.0616638E+11,
           1.6217615E+11, 3.0618717E+11, 4.6772113E+11],
    'phi': [-2.69606684462005, -2.68606684462005, -2.85606684462005, -2.87606684462005, -2.88606684462005, -2.95606684462005, -2.99606684462005,
           -3.33606684462005, -3.35606684462005, -3.86606684462005, -4.26606684462005, -4.56606684462005],
    'err': [(0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3,
           0.3), (0.3, 0.3)]
   },
 2.25: {'M': [1.5345710E+09, 2.3441586E+09, 4.4257512E+09, 6.7606273E+09, 1.2764006E+10, 1.9497862E+10, 3.6811795E+10, 5.6232448E+10, 1.0616638E+11,
           1.6217615E+11, 3.0618717E+11],
    'phi': [-2.61808766669234, -2.59808766669234, -2.65808766669234, -2.76808766669234, -3.06808766669234, -3.14808766669234, -3.33808766669234,
           -3.41378782734556, -3.60378782734556, -3.94378782734556, -4.71378782734556],
    'err': [(0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.42, 0.42), (0.46, 1.0), (0.54, 1.0),
           (1.81, 1.81)]
   },
 2.75: {'M': [2.3441586E+09, 4.4257512E+09, 6.7606273E+09, 1.2764006E+10, 1.9497862E+10, 3.6811795E+10, 5.6232448E+10, 1.0616638E+11, 1.6217615E+11,
           3.0618717E+11],
    'phi': [-2.51808766669234, -2.65808766669234, -2.75808766669234, -3.12808766669234, -3.45808766669234, -3.53808766669234, -3.81378782734556,
           -3.94378782734556, -4.11378782734556, -4.71378782734556],
    'err': [(0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.3, 0.3), (0.47, 0.47), (0.49, 1.0), (0.53, 1.0), (0.81, 1.0)]
   },
}


tmp_data['smf_sf'] = \
{

}


tmp_data['smf_q'] = \
{

}


units = {'smf_tot': 'log10', 'smf_sf': 'log10', 'smf': 'log10', 'smf_q': 'log10'}

data = {}
data['smf_tot'] = {}
data['smf_sf'] = {}
data['smf_q'] = {}
for group in ['smf_tot', 'smf_sf', 'smf_q']:

    for key in tmp_data[group]:

        if key not in tmp_data[group]:
            continue

        subdata = tmp_data[group]

        mask = []
        for element in subdata[key]['err']:
            if element == ULIM:
                mask.append(1)
            else:
                mask.append(0)

        mask = np.array(mask)

        data[group][key] = {}
        data[group][key]['M'] = np.ma.array(subdata[key]['M'], mask=mask)
        data[group][key]['phi'] = np.ma.array(subdata[key]['phi'], mask=mask)
        data[group][key]['err'] = tmp_data[group][key]['err']

#default is the star-forming galaxies data only
data['smf'] = data['smf_tot']
